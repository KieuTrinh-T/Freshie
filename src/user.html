<!DOCTYPE html>
<html lang="zxx">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Woody | Tài khoản</title>

    <!-- Reuse Header or Footer --> 
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
   
    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300;400;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="icon" href=" https://img.icons8.com/ios-filled/50/000000/circled-w.png "/>
    
    <!-- Css Styles -->
    <link rel="stylesheet" href="../css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="../css/font-awesome.min.css" type="text/css">
    <link rel="stylesheet" href="../css/elegant-icons.css" type="text/css">
    <link rel="stylesheet" href="../css/magnific-popup.css" type="text/css">
    <link rel="stylesheet" href="../css/nice-select.css" type="text/css">
    <link rel="stylesheet" href="../css/owl.carousel.min.css" type="text/css">
    <link rel="stylesheet" href="../css/slicknav.min.css" type="text/css">
    <link rel="stylesheet" href="../css/style.css" type="text/css">
    <link rel="stylesheet" href="../css/styleSignin.css">
</head>

<body>
    <!-- Page Preloder -->
    <div id="preloder">
        <div class="loader"></div>
    </div>
    
    <!-- Header Section Begin -->
    <header>
        <div id="header"></div>    
    </header>
    <!-- Header Section End -->

    <!-- Breadcrumb Section Begin -->
    <section class="breadcrumb-option">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="breadcrumb__text">
                        <h4>Đăng nhập</h4>
                        <div class="breadcrumb__links">
                            <a href="../src/index.html">Trang chủ</a>
                            <span>Đăng nhập</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Breadcrumb Section End -->

     <!-- User Section Begin -->
    <section class="user">
        <div class="form" style="padding: 30px;">
            <div class="wrapper">
               <div class="title-text">
                  <div class="title login">
                     Login
                  </div>
                  <div class="title signup">
                     Signup
                  </div>
               </div>
               <div class="form-container">
                  <div class="slide-controls">
                     <input type="radio" name="slide" id="login" checked>
                     <input type="radio" name="slide" id="signup">
                     <label for="login" class="slide login">Login</label>
                     <label for="signup" class="slide signup">Signup</label>
                     <div class="slider-tab"></div>
                  </div>
                  <div class="form-inner">
                     <form action="#" class="login">
                        <div class="field">
                           <input type="email" id="emailSignIn" name="emailSignIn" placeholder="Email Address" required>
                        </div>
                        <div class="field">
                           <input type="password" id="pwdSignIn" name="passwordSignIn" placeholder="Password" required>
                        </div>
                        <div class="pass-link">
                           <a href="#">Forgot password?</a>
                        </div>
                        <div class="field btn">
                           <div class="btn-layer"></div>
                           <input type="submit" id="signIn" value="Login">
                        </div>
                        <div class="signup-link">
                           Not a member? <a href="">Signup now</a>
                        </div>
                     </form>
                     <form action="#" class="signup">
                      <div class="field">
                          <input type="text" id="username" name="username" placeholder="User Name" required>
                       </div>
                        <div class="field">
                           <input type="email" id="email" name="email" placeholder="Email Address" required>
                        </div>
                        <div class="field">
                           <input type="password" id="pwd" name="password" placeholder="Password" required>
                        </div>
                        <div class="field btn">
                           <div class="btn-layer"></div>
                           <input type="submit" id="signUp" value="Signup">
                        </div>
                     </form>
                  </div>
               </div>
            </div>
        </div>
    </section>
    <!-- User Section Begin -->

    <!-- Footer Section Begin -->
    <footer class="footer">
        <div id="footer"></div>    
    </footer>
    <!-- Footer Section End -->

    <!-- Js Plugins -->
    <script src="../js/jquery-3.3.1.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/jquery.nice-select.min.js"></script>
    <script src="../js/jquery.nicescroll.min.js"></script>
    <script src="../js/jquery.magnific-popup.min.js"></script>
    <script src="../js/jquery.countdown.min.js"></script>
    <script src="../js/jquery.slicknav.js"></script>
    <script src="../js/mixitup.min.js"></script>
    <script src="../js/owl.carousel.min.js"></script>
    <script src="../js/main.js"></script>
    <script>
        $(function() {
        $('#header').load('../src/reuseheader.html');
        $('#footer').load('../src/reusefooter.html');
        });
    </script>
    <script>
        const loginText = document.querySelector(".title-text .login");
        const loginForm = document.querySelector("form.login");
        const loginBtn = document.querySelector("label.login");
        const signupBtn = document.querySelector("label.signup");
        const signupLink = document.querySelector("form .signup-link a");
        signupBtn.onclick = (()=>{
            loginForm.style.marginLeft = "-50%";
            loginText.style.marginLeft = "-50%";
        });
        loginBtn.onclick = (()=>{
            loginForm.style.marginLeft = "0%";
            loginText.style.marginLeft = "0%";
        });
        signupLink.onclick = (()=>{
            signupBtn.click();
            return false;
        });
    </script>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"; 
        import { getDatabase, set, ref} from "https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"; 
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js";
        
        const firebaseConfig = {
        apiKey: "AIzaSyBzDk-osxG3Vwe2A3QH3rmIMBj9aDC2tZg",
        authDomain: "woodyappweb1.firebaseapp.com",
        databaseURL: "https://woodyappweb1-default-rtdb.firebaseio.com",
        projectId: "woodyappweb1",
        storageBucket: "woodyappweb1.appspot.com",
        messagingSenderId: "135927766432",
        appId: "1:135927766432:web:808f1c3d40d6dc76f8d8c5",
        measurementId: "G-VB1YV3Y8W8"
        };
        
        const app = initializeApp(firebaseConfig); 
        const database=getDatabase(app); 
        const auth = getAuth();

        signUp.addEventListener('click',(e) => { 

            var email=document.getElementById("email").value; 
            var username=document.getElementById("username").value; 
            var password=document.getElementById("pwd").value; 

            createUserWithEmailAndPassword(auth, email, password) .then((userCredential) => { 
                const user = userCredential.user;
                set(ref(database, 'users/' + user.uid),{
                    username: username,
                    email:email
                })
                alert("Đăng ký thành công!");
            }) 
            .catch((error) => { 
                const errorCode = error.code; 
                const errorMessage = error.message; 
                // alert(errorMessage); 
                alert(errorMessage);
            }); 
        });

        signIn.addEventListener('click',(e) => { 
          var emailSignIn=document.getElementById("emailSignIn").value; 
          var passwordSignIn=document.getElementById("pwdSignIn").value; 
          signInWithEmailAndPassword(auth, emailSignIn, passwordSignIn)
          .then((userCredential) => {
          // Signed in 
          const user = userCredential.user;

          alert("Đăng nhập thành công!");
          location.href="../src/index.html";
          // ...
          })
          .catch((error) => {
          const errorCode = error.code;
          const errorMessage = error.message;

          alert(errorMessage);
          }); 
        });
  </script>

</body>

</html>